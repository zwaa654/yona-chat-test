<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yona Chat Test</title>
  <style>
    :root { --bg:#f6f7f9; --card:#ffffff; --line:#e8eaee; --text:#111827; --muted:#6b7280; --accent:#0f172a; --bubble:#111827; --bubbleText:#fff; }
    * { box-sizing:border-box; }
    body { margin:0; background:var(--bg); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; color:var(--text); }
    .wrap { max-width:720px; margin:0 auto; display:flex; flex-direction:column; height:100dvh; }
    header { padding:16px; display:flex; gap:12px; align-items:center; border-bottom:1px solid var(--line); background:var(--card); }
    header .dot { width:10px; height:10px; border-radius:50%; background:#22c55e; }
    header h1 { font-size:16px; margin:0; }
    main { flex:1; overflow:auto; padding:16px; scroll-behavior:smooth; }
    .msg { display:flex; margin:8px 0; gap:10px; }
    .msg.me { justify-content:flex-end; }
    .bubble { max-width:75%; padding:10px 12px; border-radius:14px; line-height:1.35; background:var(--card); border:1px solid var(--line); }
    .msg.me .bubble { background:var(--bubble); color:var(--bubbleText); border-color:var(--bubble); }
    .typing { display:inline-block; width:36px; }
    .typing span { display:inline-block; width:6px; height:6px; margin:0 2px; background:#cbd5e1; border-radius:50%; animation:b 1.2s infinite ease-in-out; }
    .typing span:nth-child(2){ animation-delay:0.15s } .typing span:nth-child(3){ animation-delay:0.3s }
    @keyframes b { 0%,80%,100%{ transform:scale(0.6); opacity:.6 } 40%{ transform:scale(1); opacity:1 } }
    footer { background:var(--card); border-top:1px solid var(--line); padding:10px; }
    .bar { display:flex; gap:8px; }
    textarea { flex:1; resize:none; padding:10px 12px; border-radius:12px; border:1px solid var(--line); font:inherit; min-height:44px; max-height:160px; outline:none; }
    button { padding:10px 14px; border-radius:12px; border:1px solid #111827; background:#111827; color:#fff; font-weight:600; cursor:pointer; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    .hint { font-size:12px; color:var(--muted); padding:6px 2px 0; }
    a { color:#0ea5e9; text-decoration:none; } a:hover { text-decoration:underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="dot"></div>
      <h1>Yona Chat (Test)</h1>
    </header>

    <main id="log" aria-live="polite"></main>

    <footer>
      <form class="bar" id="form">
        <textarea id="input" placeholder="Type a message. Press Enter to send (Shift+Enter for new line)"></textarea>
        <button id="send" type="submit">Send</button>
      </form>
      <div class="hint">This demo runs entirely in your browser. For a real backend, set <code>ENDPOINT_URL</code> below (Option B).</div>
    </footer>
  </div>

  <script>
    const ENDPOINT_URL = ""; // e.g., "https://yona-cs.yourname.workers.dev/chat"

    const log = document.getElementById('log');
    const form = document.getElementById('form');
    const input = document.getElementById('input');

    function addMsg(role, text) {
      const row = documen
